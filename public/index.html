<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZGC Proxy</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: "Inter", "Helvetica Neue", Arial, sans-serif;
        background: #0a0f1a;
        color: white;
        overflow: hidden;
      }

      #particles-js {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
      }

      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 50px;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 14px;
        z-index: 5;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .nav-buttons {
        display: flex;
        gap: 8px;
      }

      .nav-btn {
        background: none;
        border: none;
        color: #aad4ff;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 6px;
        border-radius: 8px;
        transition: all 0.2s;
      }

      .nav-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        color: white;
      }

      #nav-search {
        width: 50%;
        max-width: 500px;
        padding: 7px 12px;
        border-radius: 8px;
        border: none;
        outline: none;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        font-size: 14px;
        transition: 0.2s;
      }

      #nav-search:focus {
        background: rgba(255, 255, 255, 0.2);
      }

      #proxy-frame {
        position: absolute;
        top: 50px;
        left: 0;
        width: 100%;
        height: calc(100% - 50px);
        border: none;
        z-index: 1;
        background: #0a0f1a;
      }

      #home-screen {
        position: absolute;
        top: 50px;
        left: 0;
        width: 100%;
        height: calc(100% - 50px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        z-index: 2;
      }

      #home-screen h1 {
        font-size: 2.2em;
        margin-bottom: 10px;
        color: #aad4ff;
      }

      #home-screen p {
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: 25px;
      }

      #proxy-search {
        width: 70%;
        max-width: 600px;
        padding: 12px 18px;
        font-size: 16px;
        border: none;
        border-radius: 10px;
        outline: none;
        background: rgba(255, 255, 255, 0.15);
        color: white;
        backdrop-filter: blur(8px);
        transition: 0.2s;
      }

      #proxy-search:focus {
        background: rgba(255, 255, 255, 0.25);
      }
    </style>
  </head>

  <body>
    <div id="particles-js"></div>

    <header>
      <div class="nav-buttons">
        <button class="nav-btn" id="back-btn" title="Back">
          <i data-lucide="arrow-left"></i>
        </button>
        <button class="nav-btn" id="forward-btn" title="Forward">
          <i data-lucide="arrow-right"></i>
        </button>
        <button class="nav-btn" id="home-btn" title="Home">
          <i data-lucide="home"></i>
        </button>
      </div>
      <input type="text" id="nav-search" placeholder="Search or enter URL..." />
      <div></div>
    </header>

    <iframe id="proxy-frame" style="display:none;"></iframe>

    <div id="home-screen">
      <h1>ZGC Proxy</h1>
      <p>Browse freely through the internet â€” powered by Scramjet</p>
      <input id="proxy-search" placeholder="Search the web freely..." />
    </div>

    <script>
      const proxyFrame = document.getElementById("proxy-frame");
      const proxySearch = document.getElementById("proxy-search");
      const navSearch = document.getElementById("nav-search");
      const homeScreen = document.getElementById("home-screen");
      const proxyOrigin = "https://scramjet-app-vlgh.onrender.com/";

      function navigate(url) {
        if (!url.startsWith("http")) {
          url = "https://www.google.com/search?q=" + encodeURIComponent(url);
        }
        proxyFrame.src = proxyOrigin + "proxy/" + encodeURIComponent(url);
        proxyFrame.style.display = "block";
        homeScreen.style.display = "none";
        navSearch.value = url;
      }

      proxySearch.addEventListener("keydown", e => {
        if (e.key === "Enter") navigate(proxySearch.value.trim());
      });

      navSearch.addEventListener("keydown", e => {
        if (e.key === "Enter") navigate(navSearch.value.trim());
      });

      document.getElementById("home-btn").addEventListener("click", () => {
        proxyFrame.style.display = "none";
        homeScreen.style.display = "flex";
      });

      document.getElementById("back-btn").addEventListener("click", () => {
        proxyFrame.contentWindow?.history?.back();
      });

      document.getElementById("forward-btn").addEventListener("click", () => {
        proxyFrame.contentWindow?.history?.forward();
      });

      lucide.createIcons();

      // ZGC blue particles
      particlesJS("particles-js", {
        particles: {
          number: { value: 75, density: { enable: true, value_area: 800 } },
          color: { value: "#00aaff" },
          shape: { type: "circle" },
          opacity: { value: 0.5 },
          size: { value: 3 },
          line_linked: {
            enable: true,
            distance: 150,
            color: "#00aaff",
            opacity: 0.4,
            width: 1
          },
          move: { enable: true, speed: 2 }
        },
        interactivity: {
          events: {
            onhover: { enable: true, mode: "grab" },
            onclick: { enable: true, mode: "push" }
          },
          modes: { grab: { distance: 140, line_linked: { opacity: 1 } } }
        },
        retina_detect: true
      });
    </script>
  </body>
</html>
